generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Criminal {
  id           String   @id @default(uuid()) @db.Uuid()
  name         String   @db.VarChar(50)
  birthday     DateTime @db.Date
  recidivist   Boolean  @db.Boolean()
  cpf          String   @unique @db.Char(11)
  registeredAt DateTime @db.Timestamp()
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamp()
  updatedAt    DateTime @default(now()) @updatedAt
  Crime        Crime[]

  @@map("criminals")
}

model Crime {
  id          String   @id @default(uuid()) @db.Uuid()
  description String   @db.Text
  date        DateTime @db.Date
  criminalId  String   @map("criminal_id") @db.Uuid
  criminal    Criminal @relation(fields: [criminalId], references: [id])
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp()
  updatedAt   DateTime @default(now()) @updatedAt

  Guns Gun[]

  @@map("crimes")
}

model Gun {
  id        String   @id @default(uuid()) @db.Uuid()
  type      String   @db.VarChar(50)
  crimesId  String   @map("crimes_id") @db.Uuid
  crime     Crime    @relation(fields: [crimesId], references: [id])
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp()
  updatedAt DateTime @default(now()) @updatedAt

  @@map("guns")
}
